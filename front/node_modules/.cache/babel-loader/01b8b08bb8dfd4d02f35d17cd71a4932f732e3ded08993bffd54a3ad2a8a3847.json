{"ast":null,"code":"var _jsxFileName = \"/Users/user/PycharmProjects/lab333/front/src/pages/login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport \"../App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Auth() {\n  _s();\n  const [log, setLog] = useState('');\n  const [pass, setPass] = useState('');\n  function Login() {\n    const ob = {\n      username: log,\n      password: pass\n    };\n    fetch(\"http://127.0.0.1:8000/auth/\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true,\n      body: JSON.stringify(ob)\n    }).then(res => res.json()).then(res => {\n      console.log(res);\n      const token = res.key;\n      sessionStorage.setItem('token', token);\n      fetch(`http://127.0.0.1:8000/auth/`, {\n        headers: {\n          \"Authorization\": `Token ${sessionStorage.getItem('token')}`\n        }\n      }).then(response => response.json()).then(data => {\n        localStorage.setItem('user_id', data.pk);\n        localStorage.setItem('user_login', data.username);\n      });\n      setTimeout(() => {\n        window.location.replace(\"/\");\n      }, 50);\n    }).catch(function (reason) {\n      window.location.replace(\"/login\");\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register-block\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"title-block\",\n      children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form-block\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"login\",\n          className: \"text-block33\",\n          children: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"login\",\n          onChange: event => setLog(event.target.value),\n          value: log,\n          className: \"input-block33\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          className: \"text-block33\",\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          onChange: event => setPass(event.target.value),\n          value: pass,\n          className: \"input-block33\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"action-block33\",\n        onClick: () => Login(),\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"repage-block\",\n      children: [\" \", \"\\u041E\\u0442\\u0441\\u0443\\u0442\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/reg\",\n        className: \"font-medium text-indigo-600 text-xl hover:underline\",\n        children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(Auth, \"0FU3rdiSeMcUn78/2vN7pcnKp0k=\");\n_c = Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","Auth","log","setLog","pass","setPass","Login","ob","username","password","fetch","method","headers","withCredentials","body","JSON","stringify","then","res","json","console","token","key","sessionStorage","setItem","getItem","response","data","localStorage","pk","setTimeout","window","location","replace","catch","reason","event","target","value"],"sources":["/Users/user/PycharmProjects/lab333/front/src/pages/login.js"],"sourcesContent":["import React, {useState} from 'react';\nimport \"../App.css\"\n\n\nexport function Auth() {\n\n    const [log, setLog] = useState('');\n    const [pass, setPass] = useState('');\n\n    function Login() {\n        const ob = {\n            username: log,\n            password: pass,\n        }\n        fetch(\"http://127.0.0.1:8000/auth/\", {\n            method: \"post\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            withCredentials: true,\n            body: JSON.stringify(ob),\n        })\n            .then(res => res.json())\n            .then(res => {\n                console.log(res);\n                const token = res.key;\n                sessionStorage.setItem('token', token);\n\n                fetch(`http://127.0.0.1:8000/auth/`, {\n                        headers: {\n                            \"Authorization\": `Token ${sessionStorage.getItem('token')}`,\n                        },\n                    })\n                        .then(response => response.json())\n                        .then(data => {\n                            localStorage.setItem('user_id', data.pk)\n                            localStorage.setItem('user_login', data.username)\n                        })\n\n                setTimeout(() => {\n                    window.location.replace(\"/\")\n                }, 50);\n            })\n            .catch(function (reason) {\n                window.location.replace(\"/login\")\n            })\n        }\n\n    return (\n        <div className=\"register-block\">\n            <h1 className=\"title-block\">\n                    Войти\n            </h1>\n            <form className=\"form-block\">\n                    <div className=\"mb-2\">\n                        <label\n                            htmlFor=\"login\"\n                            className=\"text-block33\"\n                        >\n                            Логин\n                        </label>\n                        <input\n                            type=\"login\"\n                            onChange={(event) => setLog(event.target.value)}\n                            value={log}\n                            className=\"input-block33\"\n                        />\n                    </div>\n                    <div className=\"mb-2\">\n                        <label\n                            htmlFor=\"password\"\n                            className=\"text-block33\"\n                        >\n                            Пароль\n                        </label>\n                        <input\n                            type=\"password\"\n                            onChange={(event) => setPass(event.target.value)}\n                            value={pass}\n                            className=\"input-block33\"\n                        />\n                    </div>\n                </form>\n                <div className=\"mt-6\">\n                    <button\n                        className=\"action-block33\"\n                        onClick={() => Login()}\n                    >\n                        Войти\n                    </button>\n                </div>\n\n            <p className=\"repage-block\">\n                    {\" \"}\n                    Отсутствует аккаунт?{\" \"}\n                    <a\n                        href=\"/reg\"\n                        className=\"font-medium text-indigo-600 text-xl hover:underline\"\n                    >\n                        Зарегестрироваться\n                    </a>\n                </p>\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}